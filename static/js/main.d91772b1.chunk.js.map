{"version":3,"sources":["FileInput.js","Show.js","Viewer.js","App.js","index.js"],"names":["FileInput","react_default","a","createElement","style","backgroundColor","width","height","display","justifyContent","alignItems","className","id","type","accept","onChange","this","props","htmlFor","Component","tumblr_re","Iframe","_ref","src","title","restProps","Object","objectWithoutProperties","assign","frameBorder","scrolling","Strategy","_ref2","url","host","pathname","slice","protocol","replace","test","backgroundImage","concat","href","origin","match","searchParams","get","split","_url$pathname$match$s","_url$pathname$match$s2","slicedToArray","username","pic_id","src_base","toLowerCase","join","map","ext","Show_Iframe","Show","_ref3","_ref3$link","link","list","source","URL","key","flexGrow","padding","paddingTop","color","Show_Strategy","Viewer","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","handleKeys","e","code","prev","next","setState","pos","q","links","Math","min","length","max","console","log","state","window","addEventListener","removeEventListener","disabled","onClick","Show_Show","App","handleChange","evt","fr","readAsText","target","files","FileReader","csv","result","content","inp","arr","i","j","floor","random","shuffled","filter","x","r","alert","FileInput_FileInput","Viewer_Viewer","ReactDOM","render","App_App","document","getElementById"],"mappings":"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","file":"static/js/main.d91772b1.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport \"./FileInput.css\";\n\nexport default class FileInput extends Component {\n  render() {\n    return (\n      <div\n        style={{\n          backgroundColor: \"black\",\n          width: \"100%\",\n          height: \"100%\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\"\n        }}\n      >\n        <div className=\"file-input-container\">\n          <h1>BFV</h1>\n          <input\n            id=\"file-input\"\n            type=\"file\"\n            accept=\".csv\"\n            onChange={this.props.onChange}\n          />\n          <label htmlFor=\"file-input\">Choose a file</label>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport \"./Show.css\";\n\nconst tumblr_re = /^\\d+?\\.media\\.tumblr\\.com$/;\n\nconst Iframe = ({ src, title, ...restProps }) => (\n  <iframe\n    title={title}\n    src={src}\n    frameBorder=\"0\"\n    scrolling=\"no\"\n    {...restProps}\n  />\n);\n\nconst Strategy = ({ url }) => {\n  let title, src;\n  switch (true) {\n    case url.host === \"i.imgur.com\":\n      if (url.pathname.slice(0, 3) === \"/a/\") {\n        title = \"imgur\";\n        src =\n          url.protocol +\n          \"//imgur.com\" +\n          url.pathname.replace(\".jpg\", \"\") +\n          \"/embed?pub=true\";\n        break;\n      }\n    // eslint-disable-next-line -- FALLTHROUGH\n    case tumblr_re.test(url.host):\n      return (\n        <div className=\"img\" style={{ backgroundImage: `url(${url.href})` }} />\n      );\n    case url.host === \"gfycat.com\":\n      title = \"gfycat\";\n      src = url.origin + \"/ifr\" + url.pathname;\n      break;\n    case url.host === \"www.xvideos.com\":\n      title = \"xvideos\";\n      src =\n        url.origin + \"/embedframe/\" + url.pathname.match(/\\/video(\\d+)\\//)[1];\n      break;\n    case url.host === \"www.pornhub.com\":\n      title = \"pornhub\";\n      src = url.origin + \"/embed/\" + url.searchParams.get(\"viewkey\");\n      break;\n    case url.host === \"xhamster.com\":\n      title = \"xhamster\";\n      src = url.origin + \"/embed/\" + url.pathname.split(\"/\")[2];\n      break;\n    case url.host === \"www.hentai-foundry.com\":\n      const [username, pic_id] = url.pathname\n        .match(/^\\/pictures\\/user\\/(.*)\\/(.*)\\//)\n        .slice(1);\n      const src_base = [\n        \"https://pictures.hentai-foundry.com\",\n        username[0].toLowerCase(),\n        username,\n        pic_id\n      ].join(\"/\");\n      return (\n        <div\n          className=\"img\"\n          style={{\n            backgroundImage: [\"png\", \"jpg\"]\n              .map(ext => `url(${src_base}.${ext})`)\n              .join(\",\")\n          }}\n        />\n      );\n    default:\n      title = \"default\";\n      src = url.href;\n  }\n  return (\n    <div className=\"iframe-loading\">\n      <Iframe src={src} title={title} />\n    </div>\n  );\n};\n\nexport default function Show({ link: [list, source], style }) {\n  const url = new URL(source);\n  return (\n    <div key={source} className=\"item-container\" style={style}>\n      <div\n        style={{\n          flexGrow: 0,\n          padding: 5,\n          paddingTop: 0,\n          color: \"white\"\n        }}\n      >\n        {list}\n      </div>\n      <Strategy url={url} />\n    </div>\n  );\n}\n","import React, { Component } from \"react\";\nimport Show from \"./Show\";\nimport \"./Viewer.css\";\n\nexport default class Viewer extends Component {\n  constructor(props) {\n    super(props);\n    console.log(props);\n    this.state = { pos: 0 };\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.handleKeys);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.handleKeys);\n  }\n\n  handleKeys = e => {\n    switch (e.code) {\n      case \"ArrowLeft\":\n      case \"KeyA\":\n        return this.prev();\n      case \"ArrowRight\":\n      case \"KeyD\":\n        return this.next();\n      default:\n        return;\n    }\n  };\n\n  next = () => {\n    this.setState(({ pos }, { links: q }) => ({\n      pos: Math.min(pos + 1, q.length - 1)\n    }));\n  };\n\n  prev = () => {\n    this.setState(({ pos }) => ({\n      pos: Math.max(pos - 1, 0)\n    }));\n  };\n\n  render() {\n    const { pos } = this.state;\n    const { links } = this.props;\n    return (\n      <div className=\"viewer-container\">\n        <div className=\"button-container\">\n          <button disabled={pos === 0} onClick={this.prev}>\n            Previous\n          </button>\n          <button disabled={pos === links.length - 1} onClick={this.next}>\n            Next\n          </button>\n        </div>\n        <Show link={links[pos]} />\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport FileInput from \"./FileInput\";\nimport Viewer from \"./Viewer\";\n\nfunction shuffled(inp) {\n  const arr = inp.slice();\n  for (let i = arr.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [arr[i], arr[j]] = [arr[j], arr[i]];\n  }\n  return arr;\n}\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    this.fr = new FileReader();\n    this.fr.addEventListener(\"loadend\", () => {\n      const csv = this.fr.result.split(\"\\n\");\n      if (csv[0] !== \"listname,source,type,description\") {\n        window.alert(\"Provided csv file is not a BF export\");\n        return;\n      }\n      // links is a list of (listname, source) tuples\n      const content = shuffled(\n        csv\n          .slice(1)\n          .filter(x => !!x)\n          .map(r => r.split(\",\").slice(0, 2))\n      );\n      this.setState({ content });\n    });\n    this.state = { content: null };\n  }\n\n  handleChange = evt => this.fr.readAsText(evt.target.files[0]);\n\n  render() {\n    if (this.state.content === null) {\n      return <FileInput onChange={this.handleChange} />;\n    }\n    return <Viewer links={this.state.content} />;\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}